import { jsx as _jsx, jsxs as _jsxs } from "react/jsx-runtime";
import { X } from "lucide-react";
import React, { useCallback, useMemo } from "react";
import { IconButton } from "../../../IconButton";
import { useSideBarTooltip } from "../../context/SideBarTooltipContext";
import { tooltipNumberFormatter } from "../PortalTooltip/utils";
// Utility function for capitalizing strings
const capitalizeString = (str) => {
    return str.charAt(0).toUpperCase() + str.slice(1);
};
const SideBarTooltip = React.memo(({ height }) => {
    const { setIsSideBarTooltipOpen, data } = useSideBarTooltip();
    // if no data, close the tooltip
    if (!data) {
        setIsSideBarTooltipOpen(false);
        return null;
    }
    const handleClose = useCallback(() => {
        setIsSideBarTooltipOpen(false);
    }, [setIsSideBarTooltipOpen]);
    const processedValues = useMemo(() => {
        return data.values?.map((value, index) => ({
            ...value,
            capitalizedLabel: capitalizeString(value.label),
            isLast: index === data.values.length - 1,
        }));
    }, [data.values]);
    const title = data.title;
    return (_jsxs("div", { className: "crayon-chart-side-bar-tooltip", style: { height: `${height}px` }, children: [_jsxs("div", { className: "crayon-chart-side-bar-tooltip-header", children: [_jsx("div", { className: "crayon-chart-side-bar-tooltip-title", children: title }), _jsx(IconButton, { icon: _jsx(X, {}), size: "extra-small", onClick: handleClose, variant: "secondary", className: "crayon-chart-side-bar-tooltip-close-button" })] }), _jsx("div", { className: "crayon-chart-side-bar-tooltip-content-item-separator" }), _jsx("div", { className: "crayon-chart-side-bar-tooltip-content", autoFocus: true, children: processedValues?.map((value, index) => (_jsxs("div", { children: [_jsxs("div", { className: "crayon-chart-side-bar-tooltip-content-item", children: [_jsx("div", { className: "crayon-chart-side-bar-tooltip-content-item-color", style: { backgroundColor: value.color } }), _jsx("div", { className: "crayon-chart-side-bar-tooltip-content-item-label", children: value.capitalizedLabel }), _jsx("div", { className: "crayon-chart-side-bar-tooltip-content-item-value", children: tooltipNumberFormatter(value.value) })] }), !value.isLast && (_jsx("div", { className: "crayon-chart-side-bar-tooltip-content-item-separator" }))] }, index))) })] }));
});
SideBarTooltip.displayName = "SideBarTooltip";
export { SideBarTooltip };
//# sourceMappingURL=SideBarTooltip.js.map